<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banana Nanica - SafraGo</title>
  <link rel="stylesheet" href="../produtos.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <header class="header">
    <button class="back-btn"><i class="fa-solid fa-arrow-left"></i></button>
    <div class="header-center">
      <img src="../../imagens/logo.png" alt="SafraGo" class="logo">
    </div>
  </header>

  <section class="produto-banner">
    <img src="../../imagens/bananas.png" alt="Banana Nanica">
    <h2 class="produto-nome">Banana Nanica</h2>
  </section>

  <section class="produto-info">
    <h3>Descrição</h3>
    <p>Bananas frescas, saborosas e de ótima qualidade, cultivadas em sistema sustentável. Ideais para consumo in natura, vitaminas, sobremesas e receitas caseiras.</p>

    <h3>Informações Técnicas</h3>
    <ul>
      <li><strong>Nome científico:</strong> <em>Musa paradisiaca</em></li>
      <li><strong>Variedade:</strong> Nanica</li>
      <li><strong>Método de cultivo:</strong> Convencional sustentável</li>
      <li><strong>Colheita:</strong> Setembro de 2025</li>
      <li><strong>Peso médio:</strong> 90–120 g por unidade</li>
    </ul>

    <h3>Preço</h3>
    <p>R$ 4,20 / kg</p>

    <h3>Quantidade disponível</h3>
    <p>Aproximadamente 150 kg para pronta entrega.</p>

    <h3>Validade</h3>
    <p>Consumir em até 5 dias após a colheita.</p>
  </section>

  <section class="produto-info">
    <h3>Vendedor</h3>
    <div class="vendedor">
      <img src="../../imagens/agricutor.jpg" alt="Foto Agricultor">
      <div>
        <p><strong>Carlos Mendes</strong></p>
        <p>52 anos</p>
        <p>Sítio Boa Vista – Vale do Ribeira/SP</p>
        <p>Mais de 25 anos cultivando bananas com foco em qualidade e sabor.</p>
        <p><strong>Práticas adotadas:</strong> Adubação orgânica, controle biológico de pragas e manejo sustentável.</p>
      </div>
    </div>
  </section>

  <section class="produto-info">
    <h3>Avisos Importantes</h3>
    <ul>
      <li>Disponibilidade garantida até novembro de 2025.</li>
      <li>Entregas realizadas duas vezes por semana (terças e sextas).</li>
      <li>Produto altamente perecível, evitar armazenar na geladeira.</li>
    </ul>
  </section>

  <div class="contato">
    <button class="btn-interesse" 
        data-vendedor="UID_DO_VENDEDOR"
        data-produto="ID_DO_PRODUTO">
    <i class="fa-solid fa-comments"></i> Entrar em Contato
  </button>
  </div>

  <nav class="bottom-nav">
    <a href="../../home.html"><i class="fa-solid fa-house"></i><span>Home</span></a>
    <a href="../../produtos/pesquisa.html"><i class="fa-solid fa-magnifying-glass"></i><span>Pesquisar</span></a>
    <a href="../../produtos/catalogo.html" class="cart active"><i class="fa-solid fa-basket-shopping"></i><span>Catálogo</span></a>
    <a href="../favoritos.html"><i class="fa-solid fa-heart"></i><span>Favoritos</span></a>
    <a href="../../front/perfil.html"><i class="fa-solid fa-user"></i><span>Perfil</span></a>
  </nav>
  <script type="module">
    import { iniciarConversa } from "../../js/chat.js";
    import { getSession } from "../../js/firebaseConfig.js";
  
    document.querySelector(".btn-interesse").addEventListener("click", async () => {
  
      const vendedorUid = document.querySelector(".btn-interesse").dataset.vendedor;
      const produtoId   = document.querySelector(".btn-interesse").dataset.produto;
  
      const sess = await getSession();
  
      // cria conversa no backend
      const conversaId = await iniciarConversa(sess.uid, vendedorUid, produtoId);
  
      // abre chat corretamente
      window.location.href = `../../front/chat.html?id=${conversaId}&dest=${vendedorUid}`;
    });
  </script>
  <script type="module">
    import { iniciarConversa } from "../../js/chat.js";
    import { getSession } from "../../js/firebaseConfig.js";
  
    document.querySelector(".btn-interesse").addEventListener("click", async () => {
  
      const vendedorUid = document.querySelector(".btn-interesse").dataset.vendedor;
      const produtoId   = document.querySelector(".btn-interesse").dataset.produto;
  
      const sess = await getSession();
  
      // cria conversa no backend
      const conversaId = await iniciarConversa(sess.uid, vendedorUid, produtoId);
  
      // abre chat corretamente
      window.location.href = `../../front/chat.html?id=${conversaId}&dest=${vendedorUid}`;
    });
  </script>
  
</body>
</html>